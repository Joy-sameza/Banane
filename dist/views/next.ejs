<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bananes</title>
    <link rel="stylesheet" href="/css/style.next.css" />
    <link
      rel="shortcut icon"
      href="/images/favicon-32x32.png"
      type="image/x-icon"
    />
    <link rel="manifest" href="/images/site.webmanifest.json" />
  </head>
  <body>
    <%- include('partials/dataModal.ejs') %> <%-
    include('partials/depences.ejs') %>
    <h1 data-month-year></h1>
    <input
      type="button"
      value="Ajouter Les Données"
      title="Appuiyer sur 'A' pour Ouvrir"
      class="open-modal"
      style="
        position: absolute;
        right: 2rem;
        top: 1rem;
        background: none;
        cursor: pointer;
        width: min-content;
      "
    />
    <input
      type="button"
      value="Voir Les Données"
      class="open-modal"
      style="
        position: absolute;
        left: 2rem;
        top: 1rem;
        background: none;
        cursor: pointer;
        width: min-content;
      "
      onclick="window.location.href = '/donee';"
    />
    <table class="table" style="position: relative">
      <thead
        style="position: sticky; top: 0; z-index: 1; background-color: #222"
      >
        <th>Dates</th>
        <th>Achats</th>
        <th>Produits</th>
        <th>Stocks</th>
        <th>Ventes</th>
        <th>Restes</th>
      </thead>
      <tbody class="table-body" style="pointer-events: all"></tbody>
    </table>

    <%# include("partials/msg.succes.ejs") %>

    <template id="template-row-info">
      <tr>
        <td data-dates></td>
        <td data-achats></td>
        <td data-produits></td>
        <td data-stocks></td>
        <td data-ventes></td>
        <td data-restes></td>
        <button type="button" id="modify">Modifier</button>
      </tr>
    </template>
    <script src="js/next.js" type="module"></script>
    <% if (typeof error !== "undefined") { %>
    <script>
      alert("<%= error %>");
    </script>
    <% } %>
    <script>
      function highlight() {
        const tableBody = document.querySelector("tbody");
        tableBody.addEventListener("click", (e) => {
          const target = e.target;
          const tr = target.closest("tr");
          const initialBackgroundColor = tr.style.backgroundColor;

          tr.style.backgroundColor = "#ddd";
          tr.style.color = "#222";
          tr.addEventListener("mouseout", () => {
            tr.style.backgroundColor = initialBackgroundColor;
            tr.style.color = null;
          });
        });
      }
      highlight();
    </script>
  </body>
</html>
